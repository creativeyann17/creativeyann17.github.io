{"version":3,"file":"Article-qK54UsVZ.js","sources":["../../src/pages/Article.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Container, Spinner, Alert, Row, Col } from 'react-bootstrap';\nimport { useParams } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport find from 'lodash/find';\nimport { Helmet } from 'react-helmet';\nimport FadeIn from '../components/FadeIn';\nimport replace from 'lodash/replace';\nimport { TableOfContents } from '../components';\nimport { articlesSetSelected } from '../services/ArticlesService/actions';\nimport { getArticles } from '../services/ArticlesService/selectors';\nimport { Markdown, ArticleDetails, SocialIcons } from '../components';\nimport { ARTICLES_FOLDER, THUMBNAILS_FOLDER, GLOBAL_REQUEST_TIMEOUT } from '../constants';\n\nconst Article = ({ articles, setSelectedArticle }) => {\n  const { id } = useParams();\n  const [state, setState] = useState({ timeout: false });\n\n  const article = find(articles, (article) => article.id.toString() === id); // number != string\n\n  useEffect(() => {\n    let timeoutTimer = setTimeout(\n      () => setState({ ...state, timeout: true }),\n      GLOBAL_REQUEST_TIMEOUT * 1000\n    );\n\n    if (article && state.timeout === false) {\n      setSelectedArticle(article.id);\n    }\n\n    return () => {\n      clearTimeout(timeoutTimer);\n    };\n  });\n\n  const thumbnailUrl = article ? `${THUMBNAILS_FOLDER}/${article.thumbnail}` : '';\n\n  return (\n    <Container className=\"page page-article\">\n      {!article ? (\n        <div>\n          {state.timeout ? (\n            <Alert variant=\"warning\">\n              <b>Article not found:</b> {id}\n            </Alert>\n          ) : (\n            <Alert variant=\"light\">\n              <b>Looking for article:</b> {id} <Spinner animation=\"border\" size=\"sm\" />\n            </Alert>\n          )}\n        </div>\n      ) : (\n        <div>\n          <Helmet>\n            <title>{replace(article.id, new RegExp('-', 'g'), ' ')}</title>\n            <meta name=\"image\" property=\"og:image\" content={thumbnailUrl} />\n            <meta name=\"description\" property=\"og:description\" content={article.description} />\n          </Helmet>\n          <Row>\n            <Col lg={4}>\n              <FadeIn>\n                <img\n                  className=\"mb-3\"\n                  alt={article.thumbnail}\n                  src={thumbnailUrl}\n                  width={'100%'}\n                  height={'auto'}\n                />\n                <div className=\"d-flex justify-content-between \">\n                  <ArticleDetails article={article} showViews showLikes />\n                  <SocialIcons article={article} />\n                </div>\n              </FadeIn>\n              <TableOfContents />\n            </Col>\n            <Col lg={8}>{<Markdown source={`${ARTICLES_FOLDER}/${article.markdown}`} />}</Col>\n          </Row>\n        </div>\n      )}\n    </Container>\n  );\n};\n\nconst mapStateToProps = (state) => {\n  return {\n    articles: getArticles(state),\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    setSelectedArticle: (article) => dispatch(articlesSetSelected(article)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Article);\n"],"names":["Article","articles","setSelectedArticle","id","useParams","state","setState","useState","article","find","useEffect","timeoutTimer","GLOBAL_REQUEST_TIMEOUT","thumbnailUrl","THUMBNAILS_FOLDER","jsx","Container","jsxs","Helmet","replace","Row","Col","FadeIn","ArticleDetails","SocialIcons","TableOfContents","Markdown","ARTICLES_FOLDER","Alert","Spinner","mapStateToProps","getArticles","mapDispatchToProps","dispatch","articlesSetSelected","Article_default","connect"],"mappings":"8PAcA,MAAMA,EAAU,CAAC,CAAE,SAAAC,EAAU,mBAAAC,KAAyB,CACpD,KAAM,CAAE,GAAAC,CAAA,EAAOC,EAAA,EACT,CAACC,EAAOC,CAAQ,EAAIC,EAAAA,SAAS,CAAE,QAAS,GAAO,EAE/CC,EAAUC,EAAKR,EAAWO,GAAYA,EAAQ,GAAG,SAAA,IAAeL,CAAE,EAExEO,EAAAA,UAAU,IAAM,CACd,IAAIC,EAAe,WACjB,IAAML,EAAS,CAAE,GAAGD,EAAO,QAAS,GAAM,EAC1CO,EAAyB,GAAA,EAG3B,OAAIJ,GAAWH,EAAM,UAAY,IAC/BH,EAAmBM,EAAQ,EAAE,EAGxB,IAAM,CACX,aAAaG,CAAY,CAC3B,CACF,CAAC,EAED,MAAME,EAAeL,EAAU,GAAGM,CAAiB,IAAIN,EAAQ,SAAS,GAAK,GAE7E,OACEO,EAAAA,IAACC,EAAA,CAAU,UAAU,oBAClB,SAACR,EAaAS,EAAAA,KAAC,MAAA,CACC,SAAA,CAAAA,OAACC,EAAA,CACC,SAAA,CAAAH,EAAAA,IAAC,QAAA,CAAO,SAAAI,EAAQX,EAAQ,GAAI,IAAI,OAAO,IAAK,GAAG,EAAG,GAAG,CAAA,CAAE,QACtD,OAAA,CAAK,KAAK,QAAQ,SAAS,WAAW,QAASK,EAAc,EAC9DE,MAAC,QAAK,KAAK,cAAc,SAAS,iBAAiB,QAASP,EAAQ,WAAA,CAAa,CAAA,EACnF,SACCY,EAAA,CACC,SAAA,CAAAH,EAAAA,KAACI,EAAA,CAAI,GAAI,EACP,SAAA,CAAAJ,OAACK,EAAA,CACC,SAAA,CAAAP,EAAAA,IAAC,MAAA,CACC,UAAU,OACV,IAAKP,EAAQ,UACb,IAAKK,EACL,MAAO,OACP,OAAQ,MAAA,CAAA,EAEVI,EAAAA,KAAC,MAAA,CAAI,UAAU,kCACb,SAAA,CAAAF,EAAAA,IAACQ,EAAA,CAAe,QAAAf,EAAkB,UAAS,GAAC,UAAS,GAAC,EACtDO,MAACS,GAAY,QAAAhB,CAAA,CAAkB,CAAA,CAAA,CACjC,CAAA,EACF,QACCiB,EAAA,CAAA,CAAgB,CAAA,EACnB,EACAV,EAAAA,IAACM,EAAA,CAAI,GAAI,EAAI,SAAAN,EAAAA,IAACW,EAAA,CAAS,OAAQ,GAAGC,CAAe,IAAInB,EAAQ,QAAQ,GAAI,CAAA,CAAG,CAAA,CAAA,CAC9E,CAAA,CAAA,CACF,EArCAO,MAAC,MAAA,CACE,SAAAV,EAAM,QACLY,EAAAA,KAACW,EAAA,CAAM,QAAQ,UACb,SAAA,CAAAb,EAAAA,IAAC,KAAE,SAAA,oBAAA,CAAkB,EAAI,IAAEZ,CAAA,CAAA,CAC7B,EAEAc,EAAAA,KAACW,EAAA,CAAM,QAAQ,QACb,SAAA,CAAAb,EAAAA,IAAC,KAAE,SAAA,sBAAA,CAAoB,EAAI,IAAEZ,EAAG,IAACY,EAAAA,IAACc,EAAA,CAAQ,UAAU,SAAS,KAAK,IAAA,CAAK,CAAA,CAAA,CACzE,CAAA,CAEJ,CA2BA,CAEJ,CAEJ,EAEMC,EAAmBzB,IAChB,CACL,SAAU0B,EAAY1B,CAAK,CAAA,GAIzB2B,EAAsBC,IACnB,CACL,mBAAqBzB,GAAYyB,EAASC,EAAoB1B,CAAO,CAAC,CAAA,GAI1E2B,EAAeC,EAAQN,EAAiBE,CAAkB,EAAEhC,CAAO"}